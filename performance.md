AraNES Performance

AraNES ускоряет работу LMS‑ядра за счет архитектуры, а не за счет «магии». Основные выигрыши дают in‑process вызовы и минимальные накладные расходы на плагины.

## 1. In‑process HTTP

**Реализовано:**
- `httpx.ASGITransport` для локальных вызовов внутри приложения
- кэшированный `httpx.AsyncClient` в `app.state`
- корректное закрытие клиента при shutdown

**Что это дает:**
- отсутствие TCP/UDP и сетевого стека
- сохранение FastAPI pipeline (валидация, зависимости, middleware)

**Относительный порядок скорости:**

| Path | Порядок |
|---|---|
| Direct function call | Самый быстрый |
| ASGI in‑process | Быстрее HTTP |
| HTTP (localhost) | Медленнее in‑process |
| HTTP (сеть) | Самый медленный |

## 2. Plugin Loader

**Реализовано:**
- загрузка плагинов из `services/<plugin>/app.py`
- переимпорт и пере‑регистрация роутов при изменении `app.py`
- кэш состояния в `services/plugins_registry.json`
- выключенные плагины возвращают `HTTP 503`
- OpenAPI скрывает выключенные плагины

**Что это дает:**
- быстрый reload без рестарта приложения
- минимальные накладные расходы при неизмененных плагинах

## 3. Практический эффект

- Архитектура сохраняет API‑контракт и предсказуемое поведение.
- Производительность упирается в бизнес‑логику и валидацию, а не в сеть.
- Масштабирование функционала происходит через плагины, а не через рост монолита.
